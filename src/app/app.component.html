<div style="text-align:center">
  <h1>
    container-jmc web UI
  </h1>
  <div *ngIf="wsConnected; else disconnected">
    <div>
      Connection Established
    </div>

    <hr />

    <div>Client connection: {{connected}}</div>
    <span>JMX Commands</span>
    <div>
      <p><app-help-button (fired)="sendMessage($event)"></app-help-button></p>
      <p><app-connect-button (fired)="sendMessage($event)"></app-connect-button></p>
      <p><app-dump-button (fired)="sendMessage($event)"></app-dump-button></p>
    </div>

    <div>
      <textarea #textarea readonly>{{texts.join('\n\n')}}</textarea>
    </div>

    <div>
      <h2>Recordings</h2>
      <table>
        <tr>
          <th>Name</th>
          <th>Start Date</th>
          <th>State</th>
          <th>Duration</th>
          <th>Continuous</th>
          <th>Actions</th>
        </tr>
        <tr *ngFor="let recording of recordings">
          <td>{{recording.name}}</td>
          <td>{{recording.startTime | date:'medium'}}</td>
          <td>{{recording.state | titlecase}}</td>
          <td>{{recording.duration / 1000}}s</td>
          <td>{{recording.continuous}}</td>
          <td>
            <a href="{{downloadBaseUrl}}/{{recording.name}}.jfr">Download</a>
            |
            <button (click)="delete(recording.name)">Delete</button>
            <span *ngIf="recording.state != 'STOPPED'">
              |
              <button (click)="stop(recording.name)">Stop</button>
            </span>
          </td>
        </tr>
      </table>
    </div>
  </div>
  <ng-template #disconnected>
    <div>Not Connnected <button (click)="wsConnect()">Reconnect</button></div>
  </ng-template>
</div>
